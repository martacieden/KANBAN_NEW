#!/bin/bash
# deploy.sh - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ GitHub + Vercel

echo "üîÑ –ü–æ—á–∞—Ç–æ–∫ –¥–µ–ø–ª–æ—é..."

# –î–æ–¥–∞—î–º–æ –≤—Å—ñ –∑–º—ñ–Ω–∏
git add .

# –ó–∞–ø–∏—Ç—É—î–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ–º—ñ—Ç—É –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
if [ -z "$1" ]; then
    COMMIT_MSG="–û–Ω–æ–≤–ª–µ–Ω–Ω—è: $(date '+%Y-%m-%d %H:%M:%S')"
else
    COMMIT_MSG="$1"
fi

# –ö–æ–º—ñ—Ç–∏–º–æ –∑–º—ñ–Ω–∏
echo "üìù –ö–æ–º—ñ—Ç: $COMMIT_MSG"
git commit -m "$COMMIT_MSG"

# –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —î –Ω–æ–≤—ñ –∫–æ–º—ñ—Ç–∏
if [ $? -eq 0 ]; then
    # Push –Ω–∞ GitHub
    echo "üì§ –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –Ω–∞ GitHub..."
    git push origin main
    
    # –î–µ–ø–ª–æ–π –Ω–∞ Vercel
    echo "üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Vercel..."
    vercel --prod --yes
    
    echo "‚úÖ –î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
    echo "üåê –í–∞—à —Å–∞–π—Ç: https://task-management-chi-jade.vercel.app"
else
    echo "‚ÑπÔ∏è –ù–µ–º–∞—î –∑–º—ñ–Ω –¥–ª—è –∫–æ–º—ñ—Ç—É"
fi 